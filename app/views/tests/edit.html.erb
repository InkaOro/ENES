<h1 class="text-center mb-5">ENES Test</h1>

  <% if @test.errors.any? %>
    <p class="text-danger"> Please ensure you have answered all questions. </p>
  <% end %>

  <div data-controller="numbered-answers">
    <%= simple_form_for @test do |f| %>
      <% @test.questions.each_with_index do |question, index| %>
        <%= f.simple_fields_for :test_answers, @test.test_answers.find {  |ta| ta.question == question } || @test.test_answers.new(question: question) do |taf| %>
          <%= render 'shared/question_card',
            question: question,
            question_number: index + 1,
            form: taf
          %>
      <% end %>
    <% end %>
  </div>

  <div class="container btn-fixing col-10 d-flex justify-content-between fixed-bottom">
    <div class="">
      <%= link_to "Cancel Test", dashboard_path, class: "btn btn-main" %>
    </div>

    <%= f.submit 'Submit Test', class: "btn btn-main" %>
  </div>
<% end %>
